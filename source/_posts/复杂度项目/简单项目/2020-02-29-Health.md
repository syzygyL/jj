---
title: Health
tags:
  - note
comments: false
categories:
  - 复杂度项目
  - 简单项目
date: 2020-02-29 20:28:34
description:
top:
---


## 项目涉及技术点

### 分布式架构及权限技术栈

* SOA 服务治理 Dubbo
* 服务注册中心和配置中心 ZooKeeper
* 授权和鉴权 Spring Security
* SSM 

### 分布式版本控制及报表技术栈
* 版本控制 Git
* Microsoft Office 操作 Apache POI
* 报表 Echarts

### 第三方服务

* 短信服务 阿里云通信
* 移动端平台服务 微信开发平台
* PC 端存储服务 七牛云
* 阿里云ECS
 
## FAQ

### 服务提供方的服务无法正常暴露

由于业务实现类上添加声明式事务，会由Spring框架产生代理对象，Dubbo 需要将Service发布为服务，要求必须使用cglib创建代理对象

**我们在实现类上添加@Service注解时，必须指定实现的接口字节码`@Service(interfaceClass = XxxxxXxxx.class)`**

### 找不到符号错误

常常出现在项目启动时或者打包时，通常有三种原因:

1. 可能项目编码格式不统一。
2. 可能项目编码使用的JDK版本不统一。
3. pom 依赖问题，这种依赖可能是没有添加包的依赖，如果是聚合项目可能是没有添加其他模块的依赖，或者是添加了其它模块的依赖，但是没有将依赖的模块打包到本地仓库等。(clean --> install)

### 非法参数异常（无法解析占位符）

{%note danger%}
nested exception is java.lang.IllegalArgumentException:Could not resolve placeholder 'jdbc.username' in value "${jdbc.username}"; nested exception is java.lang.IllegalArgumentException: Could not resolve placeholder 'jdbc.username' in value "${jdbc.username}"
{%endnote%}

原因：服务提供者模块配置了多个`<context:property-placeholder>`（redis + db）,由于 spring 扫描注册`PropertyPlaceholderConfigurer`的 bean 默认为单例模式 ，所以 spring 只会扫描一个`PropertyPlaceholderConfigurer`或者`<context:property-placeholder>`标签配置，由于我们配置了多个，其它的多余标签将被忽略，所以才会出现替代属性值的占位符无法解析。

解决方法：
* 避免被忽略，`<context:property-placeholder>`标签加上`ignore-unresolvable`属性

```xml
<context:property-placeholder location="classpath:db.properties" ignore-unresolvable="true"/>
```

* 项目中集中管理`xxx.properties`配置文件的导入

```xml
<bean id="propertyPlaceholderConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
        <list>
            <value>classpath:db.properties</value>
            <value>classpath:redis.properties</value>
        </list>
    </property>
</bean>
```
